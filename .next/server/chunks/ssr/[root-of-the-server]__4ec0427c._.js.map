{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/app/admin/add/AddForm.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { Base_Url } from \"@/utils/constans\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\n\nconst AddForm = () => {\n    const prefixes = [\"60\", \"61\", \"62\", \"63\", \"64\", \"65\", \"66\", \"67\", \"68\", \"69\"];\n    const [inputs, setInputs] = useState<string[]>(Array(prefixes.length).fill(\"\"));\n    const [slots, setSlots] = useState<string[]>([]);\n    const [stockTime, setStockTime] = useState<string | null>(null);\n    const router = useRouter();\n    const searchParams = useSearchParams();\n\n    const stockId = searchParams.get(\"stockId\");\n\n    useEffect(() => {\n        generateSlots();\n\n        // if creating new stock â†’ fill with dummy random numbers\n        if (!stockId) {\n            const randomNumbers = prefixes.map(() =>\n                String(Math.floor(Math.random() * 100)).padStart(2, \"0\")\n            );\n            setInputs(randomNumbers);\n        }\n    }, []);\n\n    const generateSlots = () => {\n        const now = moment();\n\n        const startMorning = moment().hour(9).minute(0).second(0);\n        const endAfternoon = moment().hour(15).minute(0).second(0);\n        const endEvening = moment().hour(21).minute(0).second(0);\n\n        let slotStart;\n        const baseDate = now.isAfter(endEvening) ? moment().add(1, \"day\") : moment();\n\n        if (now.isBefore(startMorning)) {\n            slotStart = baseDate.clone().hour(9).minute(0).second(0);\n        } else if (now.isAfter(endEvening)) {\n            slotStart = baseDate.clone().hour(9).minute(0).second(0);\n        } else if (now.isBefore(endAfternoon)) {\n            slotStart = baseDate.clone().hour(now.hour()).minute(now.minute()).second(0);\n            slotStart.add(15 - (slotStart.minute() % 15 || 15), \"minutes\").startOf(\"minute\");\n        } else {\n            slotStart = baseDate.clone().hour(now.hour()).minute(now.minute()).second(0);\n            slotStart.add(20 - (slotStart.minute() % 20 || 20), \"minutes\").startOf(\"minute\");\n        }\n\n        const slotsArr: string[] = [];\n        let temp = slotStart.clone();\n        // âœ… extend end of day to 21:20 instead of 21:00\n        const endOfDay = baseDate.clone().hour(21).minute(20).second(0);\n\n        while (temp.isSameOrBefore(endOfDay)) {\n            let gap = temp.isBefore(baseDate.clone().hour(15)) ? 15 : 20;\n            slotsArr.push(temp.format(\"YYYY-MM-DD HH:mm:ss\"));\n            temp.add(gap, \"minutes\");\n        }\n\n        setSlots(slotsArr);\n    };\n\n    const fetchStock = async () => {\n        try {\n            const res = await axios.get(`${Base_Url}/stock/get-stock-by-id?stockId=${stockId}`);\n            if (res.data.success && res.data.data) {\n                const stock = res.data.data;\n                setStockTime(stock.stockTime);\n                const prices: string[] = stock.stockPrices.split(\",\");\n                const formattedInputs = prices.map((p) => p.slice(-2));\n                setInputs(formattedInputs);\n            }\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    useEffect(() => {\n        stockId && fetchStock();\n    }, [stockId]);\n\n    const handleChange = (index: number, value: string) => {\n        if (/^\\d{0,2}$/.test(value)) {\n            const updated = [...inputs];\n            updated[index] = value;\n            setInputs(updated);\n        }\n    };\n\n    const handleSubmit = async () => {\n        const finalNumbers = inputs.map((val, i) => `${prefixes[i]}${val.padStart(2, \"0\")}`);\n        const res = stockId\n            ? await axios.put(`${Base_Url}/stock/update-stock?stockId=${stockId}`, {\n                stockPrices: finalNumbers.join(\",\"),\n            })\n            : await axios.post(`${Base_Url}/stock/create-new-stock`, {\n                stockTime: slots[0],\n                stockPrices: finalNumbers.join(\",\"),\n            });\n\n        if (res.data.success) {\n            router.push(\"/admin\");\n        }\n    };\n\n    // ðŸŸ¡ Auto Generate for all slots of the day\n    const handleAutoGenerate = async () => {\n        const baseDate = moment(); // today's date\n        const startMorning = baseDate.clone().hour(9).minute(0).second(0);\n        const endAfternoon = baseDate.clone().hour(15).minute(0).second(0);\n        const endOfDay = baseDate.clone().hour(21).minute(20).second(0);\n\n        const slotsArr: string[] = [];\n        let temp = startMorning.clone();\n\n        while (temp.isSameOrBefore(endOfDay)) {\n            let gap = temp.isBefore(endAfternoon) ? 15 : 20; // âœ… switch gap after 3PM\n            slotsArr.push(temp.format(\"YYYY-MM-DD HH:mm:ss\"));\n            temp.add(gap, \"minutes\");\n        }\n\n        // now generate payload for ALL slots of the day\n        const payload = slotsArr.map((slot) => {\n            const randomNumbers = prefixes.map(() =>\n                String(Math.floor(Math.random() * 100)).padStart(2, \"0\")\n            );\n            const finalNumbers = randomNumbers.map((val, idx) => `${prefixes[idx]}${val}`);\n\n            return {\n                stockTime: slot,\n                stockPrices: finalNumbers.join(\",\"),\n            };\n        });\n\n        try {\n            const res = await axios.post(`${Base_Url}/stock/create-bulk`, { stocks: payload });\n            if (res.data.success) {\n                router.push(\"/admin\");\n            }\n        } catch (error) {\n            console.log(\"Error creating bulk stocks\", error);\n        }\n    };\n\n\n    return (\n        <div className=\"min-h-screen bg-[#01244a] text-white flex flex-col items-center p-6\">\n            <h1 className=\"text-xl font-bold mb-6\">Enter Winning Numbers</h1>\n\n            <p className=\"mb-4\">\n                Current Slot:{\" \"}\n                <span className=\"font-semibold\">\n                    {moment(stockTime || slots[0]).format(\"hh:mm A\") || \"--\"}\n                </span>\n            </p>\n\n            <div className=\"overflow-x-auto\">\n                <table className=\"border-collapse border border-gray-400 text-sm\">\n                    <thead>\n                        <tr className=\"bg-[#022c5a]\">\n                            <th className=\"border border-gray-400 px-3 py-2\">Prefix</th>\n                            <th className=\"border border-gray-400 px-3 py-2\">Last 2 Digits</th>\n                            <th className=\"border border-gray-400 px-3 py-2\">Final Number</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {prefixes.map((prefix, index) => (\n                            <tr key={index}>\n                                <td className=\"border border-gray-400 px-3 py-2 text-center font-semibold\">\n                                    {prefix}\n                                </td>\n                                <td className=\"border border-gray-400 px-3 py-2 text-center\">\n                                    <input\n                                        type=\"text\"\n                                        value={inputs[index]}\n                                        onChange={(e) => handleChange(index, e.target.value)}\n                                        className=\"w-16 text-center border border-gray-500 text-white rounded\"\n                                        placeholder=\"__\"\n                                    />\n                                </td>\n                                <td className=\"border border-gray-400 px-3 py-2 text-center\">\n                                    {inputs[index]\n                                        ? `${prefix}${inputs[index].padStart(2, \"0\")}`\n                                        : \"--\"}\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n\n            <div className=\"flex gap-4 mt-6 flex-wrap\">\n                <button\n                    onClick={handleAutoGenerate}\n                    className=\"bg-green-400 text-black font-semibold px-6 py-2 rounded hover:bg-green-300\"\n                >\n                    Auto Add\n                </button>\n                <button\n                    onClick={handleSubmit}\n                    className=\"bg-yellow-400 text-black font-semibold px-6 py-2 rounded hover:bg-yellow-300\"\n                >\n                    Save Numbers\n                </button>\n\n            </div>\n        </div>\n    );\n};\n\nexport default AddForm;\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}
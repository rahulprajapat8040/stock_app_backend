{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/app/(auth)/password-reset/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { Base_Url } from \"@/utils/constans\";\nimport { useRouter } from \"next/navigation\";\nimport Cookies from 'js-cookie';\n\ntype LoginFormInputs = {\n    email: string;\n    otp: string;\n    password: string;\n};\n\nconst PasswordReset = () => {\n    const { register, handleSubmit, formState: { errors } } = useForm<LoginFormInputs>();\n    const [step, setStep] = useState(1);  // Track the step (email, otp, password)\n    const [loading, setLoading] = useState(false);\n    const [errorMsg, setErrorMsg] = useState<string | null>(null);\n    const router = useRouter();\n\n    // Step 1: Email submission handler\n    const onSubmitEmail = async (data: LoginFormInputs) => {\n        try {\n            setLoading(true);\n            setErrorMsg(null);\n\n            const res = await axios.post(`${Base_Url}/auth/password-reset-req`, { email: data.email });\n            if (res.data.success) {\n                setStep(2);  // Move to OTP step\n            } else {\n                setErrorMsg(\"Failed to send OTP. Please try again.\");\n            }\n        } catch (error: any) {\n            setErrorMsg(error.response?.data?.message || \"Something went wrong.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Step 2: OTP verification handler\n    const onSubmitOTP = async (data: LoginFormInputs) => {\n        try {\n            setLoading(true);\n            setErrorMsg(null);\n\n            const res = await axios.post(`${Base_Url}/auth/verify-otp`, { email: data.email, otp: data.otp });\n            if (res.data.success) {\n                setStep(3);  // Move to password reset step\n            } else {\n                setErrorMsg(\"Invalid OTP. Please try again.\");\n            }\n        } catch (error: any) {\n            setErrorMsg(error.response?.data?.message || \"Something went wrong.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Step 3: Password reset handler\n    const onSubmitPassword = async (data: LoginFormInputs) => {\n        try {\n            setLoading(true);\n            setErrorMsg(null);\n\n            const res = await axios.post(`${Base_Url}/auth/reset-password`, { email: data.email, newPassword: data.password });\n            if (res.data.success) {\n                router.push(\"/login\");  // Redirect to login after password reset\n            } else {\n                setErrorMsg(\"Failed to reset password. Please try again.\");\n            }\n        } catch (error: any) {\n            setErrorMsg(error.response?.data?.message || \"Something went wrong.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-[#01244a] flex items-center justify-center px-4\">\n            <div className=\"bg-white rounded-2xl shadow-lg w-full max-w-md p-8\">\n                <h1 className=\"text-2xl font-bold text-center text-[#01244a] mb-6\">\n                    {step === 1 ? \"Enter Your Email\" : step === 2 ? \"Enter OTP\" : \"Enter New Password\"}\n                </h1>\n\n                {errorMsg && (\n                    <p className=\"text-red-600 text-center mb-4\">{errorMsg}</p>\n                )}\n\n                {/* Email Step */}\n                {step === 1 && (\n                    <form onSubmit={handleSubmit(onSubmitEmail)} className=\"space-y-5 text-background\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                Email\n                            </label>\n                            <input\n                                type=\"email\"\n                                {...register(\"email\", { required: \"Email is required\" })}\n                                className=\"w-full px-4 py-2 border border-background outline-none rounded-lg focus:outline-none focus:ring-2 focus:ring-[#01244a]\"\n                                placeholder=\"Enter your email\"\n                            />\n                            {errors.email && (\n                                <p className=\"text-red-500 text-xs mt-1\">{errors.email.message}</p>\n                            )}\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-[#01244a] text-white font-semibold py-2 rounded-lg hover:bg-[#023060] transition disabled:opacity-60\"\n                        >\n                            {loading ? \"Sending OTP...\" : \"Send OTP\"}\n                        </button>\n                    </form>\n                )}\n\n                {/* OTP Step */}\n                {step === 2 && (\n                    <form onSubmit={handleSubmit(onSubmitOTP)} className=\"space-y-5 text-background\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                OTP\n                            </label>\n                            <input\n                                type=\"text\"\n                                {...register(\"otp\", { required: \"OTP is required\" })}\n                                className=\"w-full px-4 py-2 border border-background outline-none rounded-lg focus:outline-none focus:ring-2 focus:ring-[#01244a]\"\n                                placeholder=\"Enter the OTP\"\n                            />\n                            {errors.otp && (\n                                <p className=\"text-red-500 text-xs mt-1\">{errors.otp.message}</p>\n                            )}\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-[#01244a] text-white font-semibold py-2 rounded-lg hover:bg-[#023060] transition disabled:opacity-60\"\n                        >\n                            {loading ? \"Verifying OTP...\" : \"Verify OTP\"}\n                        </button>\n                    </form>\n                )}\n\n                {/* Password Reset Step */}\n                {step === 3 && (\n                    <form onSubmit={handleSubmit(onSubmitPassword)} className=\"space-y-5 text-background\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                New Password\n                            </label>\n                            <input\n                                type=\"password\"\n                                {...register(\"password\", { required: \"Password is required\" })}\n                                className=\"w-full px-4 py-2 border border-background outline-none rounded-lg focus:outline-none focus:ring-2 focus:ring-[#01244a]\"\n                                placeholder=\"Enter your new password\"\n                            />\n                            {errors.password && (\n                                <p className=\"text-red-500 text-xs mt-1\">{errors.password.message}</p>\n                            )}\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-[#01244a] text-white font-semibold py-2 rounded-lg hover:bg-[#023060] transition disabled:opacity-60\"\n                        >\n                            {loading ? \"Resetting...\" : \"Reset Password\"}\n                        </button>\n                    </form>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default PasswordReset;\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}